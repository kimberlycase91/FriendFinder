<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>FriendFinder</title>
  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

  <script type="text/javascript" src="https://code.jquery.com/jquery.js"></script>

  <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js"></script>


</head>

<body>
  <div class="container">

    <h3>Survey Questions</h3>
    <hr>

    <h3>About You</h3>
    <h4>Name (Required)</h4>
    <input type="text" id="name" class="form-control" required>

    <h4>Link to Photo Image (Required)</h4>
    <input type="text" id="photo" class="form-control" required>

    <div class="questions input-field col s3 m6">
      <h6>Question 1</h6>
      <p>How important are knowledge and learning to you?</p>
      <select class="q1">
        <option value="" disabled selected>Please select</option>
        <option value="1">1 (Wait, what?)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Most important)</option>
      </select>
    </div>

    <div class="questions input-field col s3 m6">
      <h6>Question 2</h6>
      <p>Do you love to spend time in nature</p>
      <select class="q2">
        <option value="" disabled selected>Please select</option>
        <option value="1">1 (Eww, gross) </option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (I might as well live outside) </option>
      </select>
    </div>
    <div class="questions input-field col s3 m6">
      <h6>Question 3</h6>
      <p>Do you spend most of your time with animals?</p>
      <select class="q3">
        <option value="" disabled selected>Please select</option>
        <option value="1">1 (I'm more of a people person) </option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Basically all my time) </option>
      </select>
    </div>
    <div class="questions input-field col s3 m6">
      <h6>Question 4</h6>
      <p>How spontaneous are you?</p>
      <select class="q4">
        <option value="" disabled selected>Please select</option>
        <option value="1">1 (I plan everything carefully) </option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (I don't think, I just do) </option>
      </select>
    </div>
    <div class="questions input-field col s3 m6">
      <h6>Question 5</h6>
      <p>How do you feel about water (being on it, in it, or around it)?</p>
      <select class="q5">
        <option value="" disabled selected>Please select</option>
        <option value="1">1 (hate it) </option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (love it) </option>
      </select>
    </div>
    <div class="questions input-field col s3 m6">
      <h6>Question 6</h6>
      <p>Do you like to keep things clean and organized?</p>
      <select class="q6">
        <option value="" disabled selected>Please select</option>
        <option value="1">1 (I'm a hot mess) </option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (I'm basically OCD) </option>
      </select>
    </div>
    <div class="questions input-field col s3 m6">
      <h6>Question 7</h6>
      <p>Do you like pretty, sparkly things?</p>
      <select class="q7">
        <option value="" disabled selected>Please select</option>
        <option value="1">1 (I'm not about that life) </option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Glitter is my favorite color) </option>
      </select>
    </div>
    <div class="questions input-field col s3 m6">
      <h6>Question 8</h6>
      <p>Are you passionate about social/political reform?</p>
      <select class="q8">
        <option value="" disabled selected>Please select</option>
        <option value="1">1 (I prefer not to get involved) </option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Of course, who isn't?!) </option>
      </select>
    </div>
    <div class="questions input-field col s3 m6">
      <h6>Question 9</h6>
      <p>Do you believe hard work is the key to success?</p>
      <select class="q9">
        <option value="" disabled selected>Please select</option>
        <option value="1">1 (Its all up to fate) </option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Yep, nose to the grindstone) </option>
      </select>
    </div>
    <div class="questions input-field col s3 m6">
      <h6>Question 10</h6>
      <p>Do you sometimes feel like you just have bad luck?</p>
      <select class="q10">
        <option value="" disabled selected>Please select</option>
        <option value="1">1 (Nah, the glass is half full) </option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Yep, maybe I'm cursed) </option>
      </select>

      <br>
      <br>

      <!-- Submit Button -->
      <a href="#modal1" class="survey-submit waves-effect waves-light btn-large modal-trigger">Submit</a>

      <hr>
      <footer class="footer">
        <div class="container" style="text-align:right">
          <p><a href="../api/friends">API Friends List</a> | <a href="https://github.com/kimberlycase91/friendfinder">GitHub Repo</a></p>
        </div>
      </footer>

    </div>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
      $(document).ready(function () {
        $('select').formSelect();

        $('.modal').modal();
        $(".survey-submit").on("click", function (event) {
          event.preventDefault();
          var newFriend = {
            name: $("#name").val().trim(),
            photo: $("#photo").val().trim(),
            scores: [$(".q1").val(), $(".q2").val(), $(".q3").val(), $(".q4").val(), $(".q5").val(), $(".q6").val(), $(".q7").val(), $(".q8").val(), $(".q9").val(), $(".q10").val()]
          };
          
          $.ajax({
            url: "/api/friends",
            method: "POST",
            data: newFriend
          }).then(function (matchedFriend) {
            console.log(matchedFriend.name)
            if (matchedFriend) {
              console.log(matchedFriend.photo)
              $("#matchName").text(matchedFriend.name);
              $("#matchPhoto").attr("src", matchedFriend.photo);
              $("#userName").text(newFriend.name);
              $("#userPhoto").attr("src", newFriend.photo);
            }
          });
        })

      });
    </script>

    <!-- Modal Structure -->
    <div id="modal1" class="modal">
      <div class="modal-content">
        <div class="row">
          <div class="col s6">
            <p>Congratulations<p id=userName></p>
            </p>
            <img id="userPhoto" alt="your photo">
          </div>

          <div class="col s6">
            <h4>Your princess best friend is...</h4>
            <h5 id="matchName"></h5>
            <img src="" id="matchPhoto" alt="princess gif">
          </div>
        </div>
      </div>
      <div class="modal-footer" style="text-align:right;">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
      </div>
    </div>
</body>

</html>